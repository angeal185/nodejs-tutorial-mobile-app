<ion-view view-title="Event Emitter">
	<ion-content class="custom_bg" has-bouncing="false" id="scrollFabButtonTarget8">
		<div class="card animated fadeInLeft">
			<div class="center item item-divider bg-color">
			  Intro
			</div>
			<div class="item item-text-wrap">
			<h2>
				Many objects in Node emit events for example a net.Server emits an event each time a peer connects to it, a fs.readStream emits an event when the file is opened. All objects which emit events are instances of events.EventEmitter.
			</h2>
			</div>
		</div>

		<div class="card animated fadeInRight">
			<div class="center item item-divider bg-color">
			  EventEmitter Class
			</div>
			<div class="item item-text-wrap">
				<h2>
					As we have seen in previous section, EventEmitter class lies in events module. It is accessibly via following syntax:
				</h2>
<pre>
// Import events module
var events = require('events');
// Create an eventEmitter object
var eventEmitter = new events.EventEmitter();
</pre>
				<h2>
				When an EventEmitter instance faces any error, it emits an 'error' event. When new listener is added, 'newListener' event is fired and when a listener is removed, 'removeListener' event is fired.
				</h2>
				<h2>
				EventEmitter provides multiple properties like on and emit. on property is used to bind a function with the event and emit is used to fire an event.
				</h2>
			</div>
		</div>

		<div class="card animated fadeInLeft">
			<div class="center item item-divider bg-color">
			  Methods
			</div>
			<div class="item item-text-wrap">
			<div class="list list-inset">
				<div class="item">addListener(event, listener)</div>
				<div class="item">on(event, listener)</div>
				<div class="item">once(event, listener)</div>
				<div class="item">removeListener(event, listener)</div>
				<div class="item">removeAllListeners([event])</div>
				<div class="item">setMaxListeners(n)</div>
				<div class="item">listeners(event)</div>
				<div class="item">emit(event, [arg1], [arg2], [...])</div>
			</div>
			</div>
		</div>

		<div class="card animated fadeInRight">
			<div class="center item item-divider bg-color">
			  Events
			</div>
			<div class="item item-text-wrap">
				<div class="list list-inset">
					<div class="item">listenerCount(emitter, event)</div>
				</div>
				<h2>Return the number of listeners for a given event.</h2>
			</div>
		</div>

		<div class="card animated fadeInLeft">
			<div class="center item item-divider bg-color">
			  Events
			</div>
			<div class="item item-text-wrap">
				<h2><b>newListener</b></h2>
				<div class="list list-inset">
					<div class="item"><b>event</b> - String The event name</div>
					<div class="item"><b>listener</b> - Function The event handler function</div>
				</div>
				<h2>
				This event is emitted any time a listener is added. When this event is triggered, the listener may not yet have been added to the array of listeners for the event.
				</h2>
				<div class="item item-text-wrap">
					<h2><b>removeListener</b></h2>
					<div class="list list-inset">
						<div class="item"><b>event</b> - String The event name</div>
						<div class="item"><b>listener</b> - Function The event handler function</div>
					</div>
					<h2>
					This event is emitted any time someone removes a listener. When this event is triggered, the listener may not yet have been removed from the array of listeners for the event.
					</h2>
				</div>
			</div>
		</div>

		<div class="card animated fadeInLeft">
			<div class="center item item-divider bg-color">
			  Example
			</div>
			<div class="item item-text-wrap">
			<h2>
				Create a js file named main.js with the following Node.js code:
			</h2>
<pre>
var events = require('events');
var eventEmitter = new events.EventEmitter();

// listener #1
var listner1 = function listner1() {
   console.log('listner1 executed.');
}

// listener #2
var listner2 = function listner2() {
  console.log('listner2 executed.');
}

// Bind the connection event with the listner1 function
eventEmitter.addListener('connection', listner1);

// Bind the connection event with the listner2 function
eventEmitter.on('connection', listner2);

var eventListeners = require('events').EventEmitter.listenerCount(eventEmitter,'connection');
console.log(eventListeners + " Listner(s) listening to connection event");

// Fire the connection event 
eventEmitter.emit('connection');

// Remove the binding of listner1 function
eventEmitter.removeListener('connection', listner1);
console.log("Listner1 will not listen now.");

// Fire the connection event 
eventEmitter.emit('connection');

eventListeners = require('events').EventEmitter.listenerCount(eventEmitter,'connection');
console.log(eventListeners + " Listner(s) listening to connection event");

console.log("Program Ended.");
</pre>
				<h2>
				Now run the main.js to see the result:
				</h2>
<pre>
$ node main.js
</pre>
				<h2>
				Verify the Output
				</h2>
<pre>
2 Listner(s) listening to connection event
listner1 executed.
listner2 executed.
Listner1 will not listen now.
listner2 executed.
1 Listner(s) listening to connection event
Program Ended.
</pre>
			</div>
		</div>
	</ion-content>
	<fab-button ui-sref="app.buffers" target-id="scrollFabButtonTarget8">
      <i class="icon ion ion-chevron-right"></i>
    </fab-button>
    <fab-button-right ui-sref="app.eventloop" target-id="scrollFabButtonTarget8">
      <i class="icon ion ion-chevron-left"></i>
    </fab-button-right>
</ion-view>